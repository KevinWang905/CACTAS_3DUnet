<html>

    <head>

        <script type="text/javascript" src="https://niivue.github.io/niivue/features/niivue.umd.js"></script>
        
        <link rel="stylesheet" href="css/main.css">

        <script type="text/javascript">

        window.onload = function() {



            var data = [{
            url: '../data/esus12.nrrd',
            colorMap: 'gray',
            opacity: 1, 
            visible: true,
            cal_min: -500,
            cal_max: 1600
            }];

            nv1 = new niivue.Niivue({
            onLocationChange: function(e) {

                console.log(e.vox);


                if (!nv1.opts.drawingEnabled) {
                  nv1.setDrawingEnabled(1);
                }
              
                let x = data.vox[0];
                let y = data.vox[1];
                let z = data.vox[2];
                let dx = nv1.back.dims[1];
                let dy = nv1.back.dims[2];
                let dz = nv1.back.dims[3];

                nv1.drawBitmap[x + y * dx + z * dx * dy] = 1;
                nv1.refreshDrawing(true);
              

              }
            });

            nv1.opts.dragMode = nv1.dragModes.slicer3D;


            nv1.attachTo('viewer')
            nv1.loadVolumes(data)



        }



        </script>

    </head>

    <body>
        
        <canvas id="viewer"></canvas>

    </body>

</html>