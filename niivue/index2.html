<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>NiiVue</title>
  <link rel="stylesheet" href="niivue.css">

        <script type="text/javascript" src="https://niivue.github.io/niivue/features/niivue.umd.js"></script>

</head>
<body>
    <noscript>
      <strong>niivue requires JavaScript.</strong>
    </noscript>
    <header>
      <label for="slideX">SliceX</label>
      <input type="range" min="0" max="50" value="30" class="slider" id="slideX">
      <label for="slideY">SliceY</label>
      <input type="range" min="0" max="50" value="30" class="slider" id="slideY">
      <label for="slideZ">SliceZ</label>
      <input type="range" min="0" max="50" value="30" class="slider" id="slideZ">
    </header>
    <main>
      <canvas id="gl1" style='height:100%;width:100%;position:absolute;'></canvas>
    </main>
    <footer id="location">
      &nbsp;
    </footer>
    <script type="module" async>

      // function slideChange() {
      //   let vox = [0,0,0];
      //   vox[0] = parseInt(document.getElementById("slideX").value);
      //   vox[1] = parseInt(document.getElementById("slideY").value);
      //   vox[2] = parseInt(document.getElementById("slideZ").value);
      //   nv1.scene.crosshairPos = nv1.vox2frac(vox);
      //   nv1.drawScene();
      //   nv1.createOnLocationChange();
      // }
      // document.getElementById("slideX").addEventListener('change', slideChange);
      // document.getElementById("slideY").addEventListener('change', slideChange);
      // document.getElementById("slideZ").addEventListener('change', slideChange);
      // function handleLocationChange(data){ 
      //   function flt2str(flt, decimals = 0) {
      //     return flt.toFixed(decimals)
      //   }    
      //   document.getElementById('location').innerHTML = '&nbsp;&nbsp;'+flt2str(data.mm[0])+'×'+flt2str(data.mm[1])+'×'+flt2str(data.mm[2])+'='+flt2str(data.values[0].value, 3)    
      // }

      var data = [{
        // url: '../data/avf.nii.gz',
        url: '../data/esus12.nrrd',
        colorMap: 'gray',
        opacity: 1, 
        visible: true
      }];

      var nv1 = new niivue.Niivue({
       onLocationChange:function(e) {console.log(e)}
      })


      nv1.attachTo('gl1')
      await nv1.loadVolumes(data)


      // document.getElementById("slideX").max = nv1.volumes[0].dimsRAS[1] - 1;
      // document.getElementById("slideY").max = nv1.volumes[0].dimsRAS[2] - 1;
      // document.getElementById("slideZ").max = nv1.volumes[0].dimsRAS[3] - 1;
      // let vox = this.frac2vox(nv1.scene.crosshairPos);


   </script>
</body>
</html>